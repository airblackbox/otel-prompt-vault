{
  "dashboard": {
    "title": "Prompt Vault Overview",
    "uid": "promptvault-overview",
    "tags": ["genai", "promptvault", "otel"],
    "timezone": "browser",
    "panels": [
      {
        "title": "Vault Operations / min",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 },
        "targets": [
          {
            "expr": "rate(promptvault_operations_total[5m]) * 60",
            "legendFormat": "{{operation}} - {{backend}}"
          }
        ]
      },
      {
        "title": "Content Offloaded (bytes/min)",
        "type": "timeseries",
        "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
        "targets": [
          {
            "expr": "rate(promptvault_bytes_offloaded_total[5m]) * 60",
            "legendFormat": "{{attr_key}}"
          }
        ]
      },
      {
        "title": "Encryption Operations",
        "type": "stat",
        "gridPos": { "h": 4, "w": 6, "x": 0, "y": 8 },
        "targets": [
          {
            "expr": "sum(promptvault_operations_total{encrypted=\"true\"})",
            "legendFormat": "Encrypted"
          }
        ]
      },
      {
        "title": "Storage Errors",
        "type": "stat",
        "gridPos": { "h": 4, "w": 6, "x": 6, "y": 8 },
        "targets": [
          {
            "expr": "sum(promptvault_errors_total)",
            "legendFormat": "Errors"
          }
        ]
      },
      {
        "title": "Avg Object Size (bytes)",
        "type": "gauge",
        "gridPos": { "h": 4, "w": 6, "x": 12, "y": 8 },
        "targets": [
          {
            "expr": "avg(promptvault_object_size_bytes)",
            "legendFormat": "Avg Size"
          }
        ]
      },
      {
        "title": "Storage Latency (p99)",
        "type": "gauge",
        "gridPos": { "h": 4, "w": 6, "x": 18, "y": 8 },
        "targets": [
          {
            "expr": "histogram_quantile(0.99, rate(promptvault_store_duration_seconds_bucket[5m]))",
            "legendFormat": "p99 latency"
          }
        ]
      }
    ]
  }
}
